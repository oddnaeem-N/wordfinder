<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz Admin Panel (CRUD + JSON Copy)</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body { background: #f8f9fa; font-family: "Noto Sans Bengali", sans-serif; }
.container { max-width: 900px; margin-top: 30px; }
h3 { margin-top: 30px; }
.table td, .table th { vertical-align: middle; }
.jsonBox { display:none; margin-top:20px; }
textarea { font-family: monospace; }
</style>
</head>
<body>
<div class="container">
  <div class="d-flex justify-content-end my-3">
    <a href="index.html" class="btn btn-primary">Quiz Page</a>
  </div>

  <h2 class="mb-4">ЁЯУС ржХрзБржЗржЬ ржбрж╛ржЯрж╛ ржПржбржорж┐ржи (CRUD + JSON Copy)</h2>

  <!-- Words Section -->
  <h3>Words (рждрзОрж╕ржо / рждржжрзНржнржм / ржЕрж░рзНржз-рждрзОрж╕ржо / ржжрзЗрж╢рж┐)</h3>
  <table class="table table-bordered table-striped" id="wordsTable">
    <thead class="table-dark">
      <tr><th>#</th><th>рж╢ржмрзНржж</th><th>ржзрж░ржи</th><th>ржЕрзНржпрж╛ржХрж╢ржи</th></tr>
    </thead>
    <tbody></tbody>
  </table>
  <div class="row g-2 mb-3">
    <div class="col-md-6"><input id="wordText" class="form-control" placeholder="рж╢ржмрзНржж"></div>
    <div class="col-md-4">
      <select id="wordType" class="form-select">
        <option value="рждрзОрж╕ржо">рждрзОрж╕ржо</option>
        <option value="рждржжрзНржнржм">рждржжрзНржнржм</option>
        <option value="ржЕрж░рзНржз-рждрзОрж╕ржо">ржЕрж░рзНржз-рждрзОрж╕ржо</option>
        <option value="ржжрзЗрж╢рж┐">ржжрзЗрж╢рж┐</option>
      </select>
    </div>
    <div class="col-md-2 d-grid"><button class="btn btn-success" onclick="addWord()">тЮХ ржпрзЛржЧ</button></div>
  </div>
  <button class="btn btn-info mb-3" onclick="toggleJson('words')">ЁЯУД View Words JSON</button>

  <!-- Origin Words Section -->
  <h3>Origin Words</h3>
  <table class="table table-bordered table-striped" id="originTable">
    <thead class="table-dark">
      <tr><th>#</th><th>рж╢ржмрзНржж</th><th>ржнрж╛рж╖рж╛</th><th>ржЕрзНржпрж╛ржХрж╢ржи</th></tr>
    </thead>
    <tbody></tbody>
  </table>
  <div class="row g-2 mb-3">
    <div class="col-md-6"><input id="originText" class="form-control" placeholder="рж╢ржмрзНржж"></div>
    <div class="col-md-4"><input id="originLang" class="form-control" placeholder="ржнрж╛рж╖рж╛ (ржпрзЗржоржи: ржЖрж░ржмрж┐, ржлрж╛рж░рж╕рж┐, ржЗржВрж░рзЗржЬрж┐)"></div>
    <div class="col-md-2 d-grid"><button class="btn btn-success" onclick="addOrigin()">тЮХ ржпрзЛржЧ</button></div>
  </div>
  <button class="btn btn-info mb-3" onclick="toggleJson('origin')">ЁЯУД View Origin Words JSON</button>

  <!-- JSON Viewer -->
  <div id="jsonBoxWords" class="jsonBox">
    <label class="fw-bold mt-3">Words JSON (copy only):</label>
    <textarea id="jsonViewWords" class="form-control" rows="10" readonly></textarea>
  </div>
  <div id="jsonBoxOrigin" class="jsonBox">
    <label class="fw-bold mt-3">Origin Words JSON (copy only):</label>
    <textarea id="jsonViewOrigin" class="form-control" rows="10" readonly></textarea>
  </div>
</div>

<script>
// ---------------- ржбрж┐ржлрж▓рзНржЯ ржбрзЗржЯрж╛ -----------------
const defaultData = {
  words: [
    { text: "ржЪржирзНржжрзНрж░", type: "рждрзОрж╕ржо" },
    { text: "рж╕рзВрж░рзНржп", type: "рждрзОрж╕ржо" },
    { text: "рж╣рж╛ржд", type: "рждржжрзНржнржм" }
  ],
  originWords: [
    { text: "ржЖрж▓рзНрж▓рж╛рж╣", language: "ржЖрж░ржмрж┐" },
    { text: "ржЦрзЛржжрж╛", language: "ржлрж╛рж░рж╕рж┐" }
  ]
};

// ---------------- localStorage ржерзЗржХрзЗ ржбрзЗржЯрж╛ рж▓рзЛржб -----------------
let quizData = JSON.parse(localStorage.getItem("quizData")) || JSON.parse(JSON.stringify(defaultData));

// ---------------- Render Functions -----------------
function renderWords(){
  const tbody = document.querySelector("#wordsTable tbody");
  tbody.innerHTML = "";
  quizData.words.forEach((w,i)=>{
    tbody.innerHTML += `<tr>
      <td>${i+1}</td><td>${w.text}</td><td>${w.type}</td>
      <td>
        <button class="btn btn-sm btn-primary" onclick="editWord(${i})">тЬПя╕П Edit</button>
        <button class="btn btn-sm btn-danger" onclick="deleteWord(${i})">ЁЯЧСя╕П Delete</button>
      </td>
    </tr>`;
  });
}

function renderOrigin(){
  const tbody = document.querySelector("#originTable tbody");
  tbody.innerHTML = "";
  quizData.originWords.forEach((o,i)=>{
    tbody.innerHTML += `<tr>
      <td>${i+1}</td><td>${o.text}</td><td>${o.language}</td>
      <td>
        <button class="btn btn-sm btn-primary" onclick="editOrigin(${i})">тЬПя╕П Edit</button>
        <button class="btn btn-sm btn-danger" onclick="deleteOrigin(${i})">ЁЯЧСя╕П Delete</button>
      </td>
    </tr>`;
  });
}

// ---------------- CRUD Functions -----------------
function saveData(){ localStorage.setItem("quizData", JSON.stringify(quizData)); }

// Words
function addWord(){
  const text = document.getElementById("wordText").value.trim();
  const type = document.getElementById("wordType").value;
  if(!text) return alert("рж╢ржмрзНржж ржжрж┐ржи!");
  quizData.words.push({text, type});
  saveData(); renderWords(); updateJsonView('words');
  document.getElementById("wordText").value="";
}

function editWord(i){
  const newText = prompt("рж╢ржмрзНржж ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзБржи:", quizData.words[i].text);
  if(newText===null) return;
  const newType = prompt("ржзрж░ржи ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзБржи:", quizData.words[i].type);
  if(newType===null) return;
  quizData.words[i] = { text:newText.trim(), type:newType.trim() };
  saveData(); renderWords(); updateJsonView('words');
}

function deleteWord(i){
  if(confirm("ржбрж┐рж▓рж┐ржЯ ржХрж░рждрзЗ ржЪрж╛ржи?")){
    quizData.words.splice(i,1);
    saveData(); renderWords(); updateJsonView('words');
  }
}

// Origin Words
function addOrigin(){
  const text = document.getElementById("originText").value.trim();
  const language = document.getElementById("originLang").value.trim();
  if(!text || !language) return alert("рж╢ржмрзНржж ржУ ржнрж╛рж╖рж╛ ржжрж┐ржи!");
  quizData.originWords.push({text, language});
  saveData(); renderOrigin(); updateJsonView('origin');
  document.getElementById("originText").value="";
  document.getElementById("originLang").value="";
}

function editOrigin(i){
  const newText = prompt("рж╢ржмрзНржж ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзБржи:", quizData.originWords[i].text);
  if(newText===null) return;
  const newLang = prompt("ржнрж╛рж╖рж╛ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзБржи:", quizData.originWords[i].language);
  if(newLang===null) return;
  quizData.originWords[i] = { text:newText.trim(), language:newLang.trim() };
  saveData(); renderOrigin(); updateJsonView('origin');
}

function deleteOrigin(i){
  if(confirm("ржбрж┐рж▓рж┐ржЯ ржХрж░рждрзЗ ржЪрж╛ржи?")){
    quizData.originWords.splice(i,1);
    saveData(); renderOrigin(); updateJsonView('origin');
  }
}

// ---------------- JSON Viewer -----------------
function toggleJson(type){
  const box = type==='words'? document.getElementById("jsonBoxWords") : document.getElementById("jsonBoxOrigin");
  box.style.display = box.style.display==='none'?'block':'none';
  updateJsonView(type);
}

function updateJsonView(type){
  const arr = type==='words'? quizData.words : quizData.originWords;
  const lines = arr.map(o => JSON.stringify(o));
  if(type==='words') document.getElementById("jsonViewWords").value = lines.join(",\n");
  else document.getElementById("jsonViewOrigin").value = lines.join(",\n");
}

// ---------------- On Load -----------------
window.onload = ()=>{
  renderWords();
  renderOrigin();
};
</script>
</body>
</html>