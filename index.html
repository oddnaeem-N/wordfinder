<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title> ржмрж╛ржВрж▓рж╛ ржнрж╛рж╖рж╛рж░ рж╢ржмрзНржж тАж </title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body { font-family: "Noto Sans Bengali", sans-serif; background: #f8f9fa; }
.quiz-card { max-width: 500px; margin: 30px auto; padding: 25px 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
.word { font-size: 36px; font-weight: bold; margin-bottom: 10px; }
.result { margin-top: 10px; font-size: 18px; font-weight: 600; }
.btn-group-mcq { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
.btn-group-mcq .btn { width: 100%; min-height: 60px; font-size: 18px; }
.admin-panel { display:none; margin-top:40px; }
.table td, .table th { vertical-align: middle; }
.jsonBox { display:none; margin-top:20px; }
textarea { font-family: monospace; }
</style>
</head>
<body>

<div class="container">

  <!-- Toggle Buttons -->
  <div class="text-end mt-3">
    <button id="quizBtn" class="btn btn-primary" onclick="showQuiz()">ЁЯОо ржХрзБржЗржЬ</button>
    <button id="adminBtn" class="btn btn-dark" onclick="showAdmin()">тЪЩя╕П ржЕрзНржпрж╛ржбржорж┐ржи</button>
  </div>

  <!-- Quiz Section -->
  <div id="quizSection">
    <div class="card quiz-card text-center">
      <div class="card-body">
        <div id="word" class="word">рж▓рзЛржб рж╣ржЪрзНржЫрзЗ...</div>

        <div class="btn-group-mcq">
          <button class="btn btn-primary" onclick="checkAnswer(this)">A</button>
          <button class="btn btn-success" onclick="checkAnswer(this)">B</button>
          <button class="btn btn-warning" onclick="checkAnswer(this)">C</button>
          <button class="btn btn-danger" onclick="checkAnswer(this)">D</button>
        </div>

        <div class="result" id="result"></div>
        <button class="btn btn-secondary mt-3" onclick="nextWord()">ржкрж░рзЗрж░ рж╢ржмрзНржж</button>
      </div>
    </div>
  </div>

  <!-- ================= Admin Panel ================= -->
  <div id="adminPanel" class="admin-panel">
    <h2 class="mb-4">ЁЯУС</h2>
    <button class="btn btn-danger mb-4" onclick="resetData()">тЩ╗я╕ПDefault</button>

    <!-- Words Section -->
    <h3>Words</h3>
    <table class="table table-bordered table-striped" id="wordsTable">
      <thead class="table-dark">
        <tr><th>#</th><th>рж╢ржмрзНржж</th><th>ржзрж░ржи</th><th>ржЕрзНржпрж╛ржХрж╢ржи</th></tr>
      </thead><tbody></tbody>
    </table>
    <div class="row g-2 mb-3">
      <div class="col-md-6"><input id="wordText" class="form-control" placeholder="рж╢ржмрзНржж"></div>
      <div class="col-md-4">
        <select id="wordType" class="form-select">
          <option value="рждрзОрж╕ржо">рждрзОрж╕ржо</option>
          <option value="рждржжрзНржнржм">рждржжрзНржнржм</option>
          <option value="ржЕрж░рзНржз-рждрзОрж╕ржо">ржЕрж░рзНржз-рждрзОрж╕ржо</option>
          <option value="ржжрзЗрж╢рж┐">ржжрзЗрж╢рж┐</option>
        </select>
      </div>
      <div class="col-md-2 d-grid"><button class="btn btn-success" onclick="addWord()">тЮХ ржпрзЛржЧ</button></div>
    </div>
    <button class="btn btn-info mb-3" onclick="toggleJson('words')">ЁЯУД View Words JSON</button>

    <!-- Origin Words Section -->
    <h3>Origin Words</h3>
    <table class="table table-bordered table-striped" id="originTable">
      <thead class="table-dark">
        <tr><th>#</th><th>рж╢ржмрзНржж</th><th>ржнрж╛рж╖рж╛</th><th>ржЕрзНржпрж╛ржХрж╢ржи</th></tr>
      </thead><tbody></tbody>
    </table>
    <div class="row g-2 mb-3">
      <div class="col-md-6"><input id="originText" class="form-control" placeholder="рж╢ржмрзНржж"></div>
      <div class="col-md-4"><input id="originLang" class="form-control" placeholder="ржнрж╛рж╖рж╛ (ржпрзЗржоржи: ржЖрж░ржмрж┐, ржлрж╛рж░рж╕рж┐, ржЗржВрж░рзЗржЬрж┐)"></div>
      <div class="col-md-2 d-grid"><button class="btn btn-success" onclick="addOrigin()">тЮХ ржпрзЛржЧ</button></div>
    </div>
    <button class="btn btn-info mb-3" onclick="toggleJson('origin')">ЁЯУД View Origin Words JSON</button>

    <!-- JSON Viewer -->
    <div id="jsonBoxWords" class="jsonBox">
      <label class="fw-bold mt-3"></label>
      <textarea id="jsonViewWords" class="form-control" rows="10" readonly></textarea>
    </div>
    <div id="jsonBoxOrigin" class="jsonBox">
      <label class="fw-bold mt-3"></label>
      <textarea id="jsonViewOrigin" class="form-control" rows="10" readonly></textarea>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
// ---------------- ржбрж┐ржлрж▓рзНржЯ ржбрзЗржЯрж╛ -----------------
const defaultData = {
  words: [
    { text: "ржЪржирзНржжрзНрж░", type: "рждрзОрж╕ржо" },
    { text: "рж╕рзВрж░рзНржп", type: "рждрзОрж╕ржо" },
    { text: "ржиржХрзНрж╖рждрзНрж░", type: "рждрзОрж╕ржо" },
    { text: "рж╣рж╛ржд", type: "рждржжрзНржнржм" },
    { text: "ржЬрзНржпрзЛржЫржирж╛", type: "ржЕрж░рзНржз-рждрзОрж╕ржо" },
    { text: "ржХрзБрзЬрж┐", type: "ржжрзЗрж╢рж┐" }
  ],
  originWords: [
{"text":"ржЖрж▓рзНрж▓рж╛рж╣","language":"ржЖрж░ржмрж┐"},
{"text":"ржЗрж╕рж▓рж╛ржо","language":"ржЖрж░ржмрж┐"},
{"text":"ржИржорж╛ржи","language":"ржЖрж░ржмрж┐"},
{"text":"ржУржЬрзБ","language":"ржЖрж░ржмрж┐"},
{"text":"ржХрзЛрж░ржмрж╛ржирж┐","language":"ржЖрж░ржмрж┐"},
{"text":"ржХрзБрж░ржЖржи","language":"ржЖрж░ржмрж┐"},
{"text":"ржЬрж╛ржирзНржирж╛ржд","language":"ржЖрж░ржмрж┐"},
{"text":"ржЬрж╛рж╣рж╛ржирзНржирж╛ржо","language":"ржЖрж░ржмрж┐"},
{"text":"рждрж╕ржмрж┐","language":"ржЖрж░ржмрж┐"},
{"text":"ржЬрж╛ржХрж╛ржд","language":"ржЖрж░ржмрж┐"},
{"text":"рж╣ржЬ","language":"ржЖрж░ржмрж┐"},
{"text":"рж╣рж╛ржжрж┐рж╕","language":"ржЖрж░ржмрж┐"},
{"text":"рж╣рж╛рж░рж╛ржо","language":"ржЖрж░ржмрж┐"},
{"text":"рж╣рж╛рж▓рж╛рж▓","language":"ржЖрж░ржмрж┐"},
{"text":"ржЖржжрж╛рж▓ржд","language":"ржЖрж░ржмрж┐"},
{"text":"ржЖрж▓рзЗржо","language":"ржЖрж░ржмрж┐"},
{"text":"ржЗржирж╕рж╛ржи","language":"ржЖрж░ржмрж┐"},
{"text":"ржИржж","language":"ржЖрж░ржмрж┐"},
{"text":"ржЙржХрж┐рж▓","language":"ржЖрж░ржмрж┐"},
{"text":"ржХрж╛ржирзБржи","language":"ржЖрж░ржмрж┐"},
{"text":"ржХрж▓ржо","language":"ржЖрж░ржмрж┐"},
{"text":"ржХрж┐рждрж╛ржм","language":"ржЖрж░ржмрж┐"},
{"text":"ржХрзЗржЪрзНржЫрж╛","language":"ржЖрж░ржмрж┐"},
{"text":"ржиржЧржж","language":"ржЖрж░ржмрж┐"},
{"text":"ржмрж╛ржХрж┐","language":"ржЖрж░ржмрж┐"},
{"text":"ржорж╣ржХрзБржорж╛","language":"ржЖрж░ржмрж┐"},
{"text":"ржорзБржирзНрж╕рзЗржл","language":"ржЖрж░ржмрж┐"},
{"text":"ржорзЛржХрзНрждрж╛рж░","language":"ржЖрж░ржмрж┐"},
{"text":"ржЦрзЛржжрж╛","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржЧрзБржирж╛рж╣","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржирж╛ржорж╛ржЬ","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржкрзЯржЧржорзНржмрж░","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржлрзЗрж░рзЗрж╢рждрж╛","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржмрзЗрж╣рзЗрж╢ржд","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"рж░рзЛржЬрж╛","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржХрж╛рж░ржЦрж╛ржирж╛","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржЪрж╢ржорж╛","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржЬржмрж╛ржиржмржирзНржжрж┐","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"рждрж╛рж░рж┐ржЦ","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"рждрзЛрж╢ржХ","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржжржлрждрж░","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржжрзЛржХрж╛ржи","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржжрж╕рзНрждржЦржд","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржжрзМрж▓ржд","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржмрж╛ржжрж╢рж╛рж╣","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржмрзЗржЧржо","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржорзЗржерж░","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржЖржжржорж┐","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржЖржоржжрж╛ржирж┐","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржЬрж╛ржирзЛрзЯрж╛рж░","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржЬрж┐ржирзНржжрж╛","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржиржорзБржирж╛","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржмржжржорж╛рж╢","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"рж░ржлрждрж╛ржирж┐","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"рж╣рж╛ржЩрзНржЧрж╛ржорж╛","language":"ржлрж╛рж░рж╕рж┐"},
{"text":"ржЗржЙржирж┐ржнрж╛рж░рзНрж╕рж┐ржЯрж┐","language":"ржЗржВрж░рзЗржЬрж┐"},
{"text":"ржЗржЙржирж┐ржпрж╝ржи","language":"ржЗржВрж░рзЗржЬрж┐"},
{"text":"ржХрж▓рзЗржЬ","language":"ржЗржВрж░рзЗржЬрж┐"},
{"text":"ржЯрж┐ржи","language":"ржЗржВрж░рзЗржЬрж┐"},
{"text":"ржиржнрзЗрж▓","language":"ржЗржВрж░рзЗржЬрж┐"},
{"text":"ржирзЛржЯ","language":"ржЗржВрж░рзЗржЬрж┐"},
{"text":"ржкрж╛ржЙржбрж╛рж░","language":"ржЗржВрж░рзЗржЬрж┐"},
{"text":"ржкрзЗржирзНрж╕рж┐рж▓","language":"ржЗржВрж░рзЗржЬрж┐"},
{"text":"ржмрзНржпрж╛ржЧ","language":"ржЗржВрж░рзЗржЬрж┐"},
{"text":"ржлрзБржЯржмрж▓","language":"ржЗржВрж░рзЗржЬрж┐"},
{"text":"ржорж╛рж╕рзНржЯрж╛рж░","language":"ржЗржВрж░рзЗржЬрж┐"},
{"text":"рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐","language":"ржЗржВрж░рзЗржЬрж┐"},
{"text":"рж╕рзНржХрзБрж▓","language":"ржЗржВрж░рзЗржЬрж┐"},
{"text":"ржЖржлрж┐ржо","language":"ржЗржВрж░рзЗржЬрж┐"},
{"text":"ржЕржлрж┐рж╕","language":"ржЗржВрж░рзЗржЬрж┐"},
{"text":"ржЗрж╕рзНржХрзБрж▓","language":"ржЗржВрж░рзЗржЬрж┐"},
{"text":"ржмрж╛ржХрзНрж╕","language":"ржЗржВрж░рзЗржЬрж┐"},
{"text":"рж╣рж╛рж╕ржкрж╛рждрж╛рж▓","language":"ржЗржВрж░рзЗржЬрж┐"},
{"text":"ржмрзЛрждрж▓","language":"ржЗржВрж░рзЗржЬрж┐"},
{"text":"ржЖржирж╛рж░рж╕","language":"ржкрж░рзНрждрзБржЧрж┐ржЬ"},
{"text":"ржЖрж▓ржкрж┐ржи","language":"ржкрж░рзНрждрзБржЧрж┐ржЬ"},
{"text":"ржЖрж▓ржорж╛рж░рж┐","language":"ржкрж░рзНрждрзБржЧрж┐ржЬ"},
{"text":"ржЧрж┐рж░рзНржЬрж╛","language":"ржкрж░рзНрждрзБржЧрж┐ржЬ"},
{"text":"ржЧрзБржжрж╛ржо","language":"ржкрж░рзНрждрзБржЧрж┐ржЬ"},
{"text":"ржЪрж╛ржмрж┐","language":"ржкрж░рзНрждрзБржЧрж┐ржЬ"},
{"text":"ржкрж╛ржЙрж░рзБржЯрж┐","language":"ржкрж░рзНрждрзБржЧрж┐ржЬ"},
{"text":"ржкрж╛ржжрзНрж░рж┐","language":"ржкрж░рзНрждрзБржЧрж┐ржЬ"},
{"text":"ржмрж╛рж▓рждрж┐","language":"ржкрж░рзНрждрзБржЧрж┐ржЬ"},
{"text":"ржХрж╛рж░рзНрждрзБржЬ","language":"ржлрж░рж╛рж╕рж┐"},
{"text":"ржХрзБржкржи","language":"ржлрж░рж╛рж╕рж┐"},
{"text":"ржбрж┐ржкрзЛ","language":"ржлрж░рж╛рж╕рж┐"},
{"text":"рж░рзЗрж╕рзНрждрзЛрж░рж╛ржБ","language":"ржлрж░рж╛рж╕рж┐"},
{"text":"ржЗрж╕рзНржХрж╛ржкржи","language":"ржУрж▓ржирзНржжрж╛ржЬ"},
{"text":"ржЯрзЗржХрзНржХрж╛","language":"ржУрж▓ржирзНржжрж╛ржЬ"},
{"text":"рждрзБрж░рзВржк","language":"ржУрж▓ржирзНржжрж╛ржЬ"},
{"text":"рж░рзБржЗрждржи","language":"ржУрж▓ржирзНржжрж╛ржЬ"},
{"text":"рж╣рж░рждржи","language":"ржУрж▓ржирзНржжрж╛ржЬ"},
{"text":"ржЦржирзНржжрж░","language":"ржЧрзБржЬрж░рж╛ржЯрж┐"},
{"text":"рж╣рж░рждрж╛рж▓","language":"ржЧрзБржЬрж░рж╛ржЯрж┐"},
{"text":"ржЪрж╛рж╣рж┐ржжрж╛","language":"ржкрж╛ржЮрзНржЬрж╛ржмрж┐"},
{"text":"рж╢рж┐ржЦ","language":"ржкрж╛ржЮрзНржЬрж╛ржмрж┐"},
{"text":"ржЪрж╛ржХрж░","language":"рждрзБрж░рзНржХрж┐"},
{"text":"ржЪрж╛ржХрзБ","language":"рждрзБрж░рзНржХрж┐"},
{"text":"рждрзЛржк","language":"рждрзБрж░рзНржХрж┐"},
{"text":"ржжрж╛рж░рзЛржЧрж╛","language":"рждрзБрж░рзНржХрж┐"},
{"text":"ржЪрж╛","language":"ржЪрзАржирж╛"},
{"text":"ржЪрж┐ржирж┐","language":"ржЪрзАржирж╛"},
{"text":"ржлрзБржЩрзНржЧрж┐","language":"ржмрж╛рж░рзНржорж┐ржЬ"},
{"text":"рж▓рзБржЩрзНржЧрж┐","language":"ржмрж╛рж░рзНржорж┐ржЬ"},
{"text":"рж░рж┐ржХрзНрж╕рж╛","language":"ржЬрж╛ржкрж╛ржирж┐"},
{"text":"рж╣рж╛рж░рж┐ржХрж┐рж░рж┐","language":"ржЬрж╛ржкрж╛ржирж┐"}
  ]
};

// localStorage ржП ржкрзНрж░ржержоржмрж╛рж░ ржмрж╕рж╛ржирзЛ
if(!localStorage.getItem("quizData")){
  localStorage.setItem("quizData", JSON.stringify(defaultData));
}

// ---------------- localStorage ржерзЗржХрзЗ рж▓рзЛржб -----------------
let quizData = JSON.parse(localStorage.getItem("quizData"));
let words = quizData.words;
let originWords = quizData.originWords;

// ---------- Quiz Functions ----------
const originOptions = ["ржЪрж┐ржирж╛","ржмрж╛рж░рзНржорж┐ржЬ","рж╣рж┐ржирзНржжрж┐","ржЗржВрж░рзЗржЬрж┐","ржЖрж░ржмрж┐","ржлрж╛рж░рж╕рж┐","ржкрж░рзНрждрзБржЧрж┐ржЬ"];

let allWords = [...words, ...originWords];
let currentWordIndex = -1;
let answered = false;

// Shuffle function
function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}
shuffleArray(allWords);

function nextWord() {
  answered = false;
  currentWordIndex++;
  if(currentWordIndex >= allWords.length){
    alert("рж╕ржм рж╢ржмрзНржж рж╢рзЗрж╖!");
    return;
  }

  const currentWord = allWords[currentWordIndex];
  document.getElementById("word").innerText = currentWord.text;
  document.getElementById("result").innerText = "";

  const btns = document.querySelectorAll(".btn-group-mcq .btn");
  btns.forEach(b => b.disabled = false);

  let options = [];
  let correctIndex = Math.floor(Math.random()*4);

  if(currentWord.language){
    options = originOptions.filter(l => l !== currentWord.language);
    options = shuffleArray(options).slice(0,3);
    options.splice(correctIndex, 0, currentWord.language);
  } else {
    const types = ["рждрзОрж╕ржо","рждржжрзНржнржм","ржЕрж░рзНржз-рждрзОрж╕ржо","ржжрзЗрж╢рж┐"];
    options = types.filter(t => t !== currentWord.type);
    options = shuffleArray(options).slice(0,3);
    options.splice(correctIndex, 0, currentWord.type);
  }

  btns.forEach((btn,index)=>{
    btn.dataset.type = options[index];
    btn.innerText = String.fromCharCode(65+index) + ". " + options[index];
  });
}

function checkAnswer(btnElement) {
  const result = document.getElementById("result");
  const currentWord = allWords[currentWordIndex];
  const selectedType = btnElement.dataset.type || "";

  if(answered){
    result.innerText = "тЪая╕П ржПржХрж╛ржзрж┐ржХ ржЙрждрзНрждрж░ ржЧрзНрж░рж╣ржгржпрзЛржЧрзНржп ржирзЯ";
    result.style.color = "orange";
    return;
  }

  answered = true;
  let correctAnswer = currentWord.type || currentWord.language;

  if(selectedType === correctAnswer){
    result.innerHTML = `тЬЕ <span style="color:green">рж╕ржарж┐ржХ: ${correctAnswer}</span>`;
  } else {
    result.innerHTML = `тЭМ ржнрзБрж▓! <span style="color:green">рж╕ржарж┐ржХ: ${correctAnswer}</span>`;
  }
}

// ---------- Admin Panel Functions ----------
function renderWords(){
  const tbody = document.querySelector("#wordsTable tbody");
  tbody.innerHTML = "";
  quizData.words.forEach((w,i)=>{
    tbody.innerHTML += `<tr>
      <td>${i+1}</td><td>${w.text}</td><td>${w.type}</td>
      <td>
        <button class="btn btn-sm btn-primary" onclick="editWord(${i})">тЬПя╕П</button>
        <button class="btn btn-sm btn-danger" onclick="deleteWord(${i})">ЁЯЧСя╕П</button>
      </td>`;
  });
}

function renderOrigin(){
  const tbody = document.querySelector("#originTable tbody");
  tbody.innerHTML = "";
  quizData.originWords.forEach((o,i)=>{
    tbody.innerHTML += `<tr>
      <td>${i+1}</td><td>${o.text}</td><td>${o.language}</td>
      <td>
        <button class="btn btn-sm btn-primary" onclick="editOrigin(${i})">тЬПя╕П</button>
        <button class="btn btn-sm btn-danger" onclick="deleteOrigin(${i})">ЁЯЧСя╕П</button>
      </td>`;
  });
}

function addWord(){
  const text = document.getElementById("wordText").value.trim();
  const type = document.getElementById("wordType").value;
  if(!text) return alert("рж╢ржмрзНржж ржжрж┐ржи!");
  quizData.words.push({text, type});
  saveData(); renderWords(); updateJsonView('words');
  document.getElementById("wordText").value="";
}

function editWord(i){
  const newText = prompt("рж╢ржмрзНржж ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзБржи:", quizData.words[i].text);
  if(newText===null) return;
  const newType = prompt("ржзрж░ржи ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзБржи:", quizData.words[i].type);
  if(newType===null) return;
  quizData.words[i] = { text:newText.trim(), type:newType.trim() };
  saveData(); renderWords(); updateJsonView('words');
}

function deleteWord(i){
  if(confirm("ржбрж┐рж▓рж┐ржЯ ржХрж░рждрзЗ ржЪрж╛ржи?")){
    quizData.words.splice(i,1);
    saveData(); renderWords(); updateJsonView('words');
  }
}

function addOrigin(){
  const text = document.getElementById("originText").value.trim();
  const language = document.getElementById("originLang").value.trim();
  if(!text || !language) return alert("рж╢ржмрзНржж ржУ ржнрж╛рж╖рж╛ ржжрж┐ржи!");
  quizData.originWords.push({text, language});
  saveData(); renderOrigin(); updateJsonView('origin');
  document.getElementById("originText").value="";
  document.getElementById("originLang").value="";
}

function editOrigin(i){
  const newText = prompt("рж╢ржмрзНржж ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзБржи:", quizData.originWords[i].text);
  if(newText===null) return;
  const newLang = prompt("ржнрж╛рж╖рж╛ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзБржи:", quizData.originWords[i].language);
  if(newLang===null) return;
  quizData.originWords[i] = { text:newText.trim(), language:newLang.trim() };
  saveData(); renderOrigin(); updateJsonView('origin');
}

function deleteOrigin(i){
  if(confirm("ржбрж┐рж▓рж┐ржЯ ржХрж░рждрзЗ ржЪрж╛ржи?")){
    quizData.originWords.splice(i,1);
    saveData(); renderOrigin(); updateJsonView('origin');
  }
}

function resetData(){
  if(confirm("ржбрж┐ржлрж▓рзНржЯ ржбрж╛ржЯрж╛рзЯ ржлрж┐рж░рзЗ ржпрзЗрждрзЗ ржЪрж╛ржи?")){
    quizData = JSON.parse(JSON.stringify(defaultData));
    saveData(); renderWords(); renderOrigin(); updateJsonView('words'); updateJsonView('origin');
  }
}

function saveData(){
  localStorage.setItem("quizData", JSON.stringify(quizData));
  words = quizData.words;
  originWords = quizData.originWords;
  allWords = [...words, ...originWords];
}

function toggleJson(type){
  if(type==='words'){
    const box = document.getElementById("jsonBoxWords");
    box.style.display = box.style.display==='none'?'block':'none';
    updateJsonView('words');
  } else {
    const box = document.getElementById("jsonBoxOrigin");
    box.style.display = box.style.display==='none'?'block':'none';
    updateJsonView('origin');
  }
}

function updateJsonView(type){
  const arr = type==='words'? quizData.words : quizData.originWords;
  const lines = arr.map(o => JSON.stringify(o));
  if(type==='words'){
    document.getElementById("jsonViewWords").value = lines.join(",\n");
  } else {
    document.getElementById("jsonViewOrigin").value = lines.join(",\n");
  }
}

// ---------- Section Toggle ----------
function showQuiz(){
  document.getElementById("quizSection").style.display="block";
  document.getElementById("adminPanel").style.display="none";
}

function showAdmin(){
  document.getElementById("quizSection").style.display="none";
  document.getElementById("adminPanel").style.display="block";
}

// ржкрзНрж░ржержоржмрж╛рж░ рж▓рзЛржб
window.onload = ()=>{
  showQuiz();
  nextWord();
  renderWords();
  renderOrigin();
};
</script>
</body>
</html>
